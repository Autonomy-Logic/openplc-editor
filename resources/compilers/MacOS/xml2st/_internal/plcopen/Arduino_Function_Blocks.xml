<?xml version='1.0' encoding='utf-8'?>
<project xmlns:ns1="http://www.plcopen.org/xml/tc6_0201" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.plcopen.org/xml/tc6_0201">
  <fileHeader companyName="OpenPLC" productName="Arduino Function Blocks Library" productVersion="1.0" creationDateTime="2021-11-11T02:33:11"/>
  <contentHeader name="Arduino Function Blocks" author="Thiago Alves" modificationDateTime="2021-11-11T02:33:11">
    <coordinateInfo>
      <fbd>
        <scaling x="0" y="0"/>
      </fbd>
      <ld>
        <scaling x="0" y="0"/>
      </ld>
      <sfc>
        <scaling x="0" y="0"/>
      </sfc>
    </coordinateInfo>
  </contentHeader>
  <types>
    <dataTypes/>
    <pous>
      <pou name="DS18B20" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PIN">
              <type>
                <SINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino pin where sensor is connected to]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[OUT := 0.0;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Reads temperature from one DS18B20 one-wire sensor connected to the pin specified in PIN]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="DS18B20_2_OUT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PIN">
              <type>
                <SINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino pin where sensor is connected to]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT_0">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_1">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[OUT := 0.0;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Reads temperature from two DS18B20 one-wire sensors. Both sensors must be on the same bus connected to the pin specified in PIN]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="DS18B20_3_OUT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PIN">
              <type>
                <SINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino pin where sensor is connected to]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT_0">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_1">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_2">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[OUT := 0.0;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Reads temperature from three DS18B20 one-wire sensors. All sensors must be on the same bus connected to the pin specified in PIN]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="DS18B20_4_OUT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PIN">
              <type>
                <SINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino pin where sensor is connected to]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT_0">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_1">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_2">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_3">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[OUT := 0.0;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Reads temperature from four DS18B20 one-wire sensors. All sensors must be on the same bus connected to the pin specified in PIN]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="DS18B20_5_OUT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PIN">
              <type>
                <SINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino pin where sensor is connected to]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT_0">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_1">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_2">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_3">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="OUT_4">
              <type>
                <REAL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Temperature output in Celsius]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[OUT := 0.0;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Reads temperature from five DS18B20 one-wire sensors. All sensors must be on the same bus connected to the pin specified in PIN]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="CLOUD_ADD_BOOL" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="VAR_NAME"><type><string/></type></variable>
            <variable name="BOOL_VAR"><type><BOOL/></type></variable>
          </inputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[SSID := SSID;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Add a BOOL variable to sync with the Arduino Cloud. VAR_NAME must have the same name as the variable set up in the Arduino IoT Cloud]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="CLOUD_ADD_DINT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="VAR_NAME"><type><string/></type></variable>
            <variable name="DINT_VAR"><type><DINT/></type></variable>
          </inputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[SSID := SSID;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Add an DINT variable (Arduino int) to sync with the Arduino Cloud. VAR_NAME must have the same name as the variable set up in the Arduino IoT Cloud]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="CLOUD_ADD_REAL" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="VAR_NAME"><type><string/></type></variable>
            <variable name="REAL_VAR"><type><REAL/></type></variable>
          </inputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[SSID := SSID;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Add a REAL variable (Arduino float) to sync with the Arduino Cloud. VAR_NAME must have the same name as the variable set up in the Arduino IoT Cloud]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="CLOUD_BEGIN" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="THING_ID"><type><string/></type></variable>
            <variable name="SSID"><type><string/></type></variable>
            <variable name="PASS"><type><string/></type></variable>
          </inputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[SSID := SSID;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[Setup and initialize Arduino Cloud communication. Must be called before adding any variables (properties).]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="PWM_CONTROLLER" pouType="functionBlock">
        <interface>
        <inputVars>
        <variable name="CHANNEL">
        <type>
        <SINT/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[CHANNEL]]></xhtml:p>
        </documentation>
        </variable>
        <variable name="FREQ">
        <type>
        <REAL/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[FREQ]]></xhtml:p>
        </documentation>
        </variable>
        <variable name="DUTY">
        <type>
        <REAL/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[DUTY]]></xhtml:p>
        </documentation>
        </variable>
        </inputVars>
        <localVars>
        <variable name="internal_ch">
        <type>
        <SINT/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[internal_ch]]></xhtml:p>
        </documentation>
        </variable>
        <variable name="internal_freq">
        <type>
        <REAL/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[internal_freq]]></xhtml:p>
        </documentation>
        </variable>
        <variable name="internal_duty">
        <type>
        <REAL/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[internal_duty]]></xhtml:p>
        </documentation>
        </variable>
        </localVars>
        <outputVars>
        <variable name="SUCCESS">
        <type>
        <BOOL/>
        </type>
        <documentation>
        <xhtml:p><![CDATA[SUCCESS]]></xhtml:p>
        </documentation>
        </variable>
        </outputVars>
        </interface>
        <body>
        <ST>
        <xhtml:p><![CDATA[
          IF CHANNEL < 1 THEN
            SUCCESS := FALSE;
            RETURN;
          END_IF;


          IF (CHANNEL <> internal_ch) OR (FREQ <> internal_freq) OR (DUTY <> internal_duty) THEN
            SUCCESS := TRUE;
          END_IF;

        ]]></xhtml:p></ST>
        </body>
        <documentation>
        <xhtml:p><![CDATA[Configures the CPU internal PWM peripheral to generate a PWM signal through hardware. If the CPU does not have a PWM peripheral, compiling this block will result in a compilation error. CHANNEL is the PWM channel number. For most Arduino boards that number is the pin number for the PWM capable pin. FREQ is the desired PWM frequency in Hz. DUTY is the PWM duty cycle (between 0 and 100).]]></xhtml:p>
        </documentation>
      </pou>
      <pou name="ARDUINOCAN_CONF" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="EN_PIN">
              <type>
                <WORD/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN Enable pin]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="BR">
              <type>
                <LINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN Baudrate]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="DONE">
              <type>
                <BOOL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN configuration Done flag]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
      </pou>
      <pou name="ARDUINOCAN_WRITE" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="ID">
              <type>
                <DWORD/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN message ID]]></xhtml:p>
              </documentation>
            </variable>
             <variable name="D0">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN first payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D1">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN second payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D2">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN third payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D3">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN fourth payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D4">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN fifth payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D5">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN sixth payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D6">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN seventh payload byte]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="D7">
              <type>
                <USINT/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN eighth payload byte]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="DONE">
              <type>
                <BOOL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN write done flag]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
      </pou>
      <pou name="ARDUINOCAN_WRITE_WORD" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="ID">
              <type>
                <DWORD/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN message ID]]></xhtml:p>
              </documentation>
            </variable>
            <variable name="DATA">
              <type>
                <LWORD/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN payload]]></xhtml:p>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="DONE">
              <type>
                <BOOL/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN write done flag]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
      </pou>
      <pou name="ARDUINOCAN_READ" pouType="functionBlock">
        <interface>
          <outputVars>
            <variable name="DATA">
              <type>
                <LWORD/>
              </type>
              <documentation>
                <xhtml:p><![CDATA[Arduino CAN readed data from arduino can message]]></xhtml:p>
              </documentation>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[DATA := 0;]]></xhtml:p>
          </ST>
        </body>
        <documentation>
          <xhtml:p><![CDATA[CAN READ]]></xhtml:p>
        </documentation>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations/>
  </instances>
</project>
